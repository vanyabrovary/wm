<Perl>
my $host = 'w.ssh.in.ua';

push @{$VirtualHost{'*:8080'}}, {
    ServerName                      => $host,
    DocumentRoot                    => '/var/www/'.$host,
    PerlSwitches                    => '-Mlib=/var/www/'.$host.'/lib',
    ErrorLog 			            => '/var/www/'.$host.'/var/log/error.log',
    ServerAdmin			            => 'admin@'.$host,
    PerlOptions                     => '+Parent -ParseHeaders',
    DBDriver                        => 'pgsql',
    DBDParams                       => '"hostaddr=127.0.0.1 host=localhost port=5432 dbname=apacheauth user=apache password=ooo"',
    DBDMin                          => '3',
    DBDKeep                         => '5',
    DBDMax                          => '9',
    DBDExptime                      => '30',
    DBDPersist                      => 'On',
    Location => {

        '/' => {
            SetHandler              => 'perl-script',
            SetInputFilter          => 'apreq2',
            PerlResponseHandler     => 'Entry::Index'
        },

        '/admin' => {
            AuthFormProvider        => 'dbd',
            AuthType                => 'form',
            AuthName                => 'private',
            AuthnCacheProvideFor    => 'dbd',
            AuthnCacheContext       => 'my-server',
            Session                 => 'On',
            SessionCookieName       => 'session path=/',
            SessionCryptoPassphrase => 'my-secret',
            ErrorDocument           => '401 /login',
            Require                 => 'valid-user',
            AuthDBDUserPWQuery      => '"SELECT passwd FROM pgsql_auth WHERE username = %s"',
            SetHandler              => 'perl-script',
            SetInputFilter          => 'apreq2',
            PerlResponseHandler     => 'Entry::Admin',
            AllowOverride           => 'None',
        },

        '/logout' => {
            SetHandler              => 'form-logout-handler',

            AuthFormLogoutLocation  => '/',
            Session                 => 'On',
            SessionMaxAge           => '1',
            SessionCookieName       => 'session path=/',
            SetHandler              => 'perl-script',
            SetInputFilter          => 'apreq2',

            PerlResponseHandler     => 'Entry::Index',
            AllowOverride           => 'None',
        }
    }
};

</Perl>